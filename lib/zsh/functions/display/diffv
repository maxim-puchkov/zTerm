#!/bin/zsh

#  diffv
#  zTerm (id: 136)
#
#  Generated by 'zfn' on 2020-11-05
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# diffv
#
# Compare two parameters (variables).
#
# Usage:
# diffv <name> <name>
emulate -LR zsh
typeset PROG="/usr/local/bin/diff"

if [[ $# -ne 2 ]]; then
  error -1 -m 'specify 2 parameters to compare' \
           -u "${0} <name> <name>"
fi
if [[ ! -v $1 ]]; then
  error -1 -m 'parameter ${1} is not set'
fi
if [[ ! -v $2 ]]; then
  error -1 -m 'parameter ${2} is not set'
fi

typeset -a OPTS=(
  --text  --suppress-common-lines  --side-by-side
  --color=always --report-identical-files
)

$PROG $OPTS \
  =(print -nrC1 -- "${(@P)1}") \
  =(print -nrC1 -- "${(@P)2}")

printzf "[$status] %0(s.Identical.Different) files" s:$status
