#!/bin/zsh

#  highlight-column
#  zTerm (id: 165)
#
#  Generated by 'mkfn' on 2020-10-18
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# highlight-column
#
# <#Description...#>
#
# Usage:
# highlight-column <#usage...#>
emulate -LR zsh


# Function options
## --color <number> :: Number of color to use :: {000..255}
## no-color <color> :: Color reset sequence :: '$'\033[39m'
local -A opts
opts=([--color]="014" [--no-color]="${fg[default]}")
local -a specs
specs=(-color: -no-color:)
if [[ $# -gt 0 ]] &&
   {! zparseopts -D -K -M -A opts - $specs}; then
  return 1
fi
# Set colors
local color=${(%)FG[${(l:3::0:)opts[--color]}]}
local no_color=$opts[--no-color]


# Function arguments
if [[ $# -eq 0 ]]; then
  set -- '1'
fi
# Highlight every specified column
local -i column_index=${1:=1}
/usr/bin/awk -v color=$color -v no_color=$no_color '{
  sub($'$column_index', color""$'$column_index'""no_color, $0);
  print $0;
}'
return 0
