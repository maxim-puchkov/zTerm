#!/bin/zsh

#  clr
#  zTerm (id: 61)
#
#  Generated by 'zfn' on 2020-10-24
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# clr
#
# Clear terminal buffer.
#
# Usage:
# clr
emulate -LR zsh


# Function options.
# @define option
local -A opts
local -a specs
specs=('r' 's')
if [[ $# -gt 0 ]] &&
   {! zparseopts -D -K -M -A opts - $specs}; then
  return 1
fi


# Escape sequences.
local -a esc_seq=('\e[H' '\e[2J')


# @option -s
# @description Clear scrollback buffer.
if [[ ${+opts[-s]} -eq 1 ]]; then
  esc_seq+=('\e[3J')
fi


# Print escape sequences.
printf "%b" "${esc_seq[@]}"


# @option -r
# @description Reset shell.
if [[ ${+opts[-r]} -eq 1 ]]; then
  print -P -- "[%*] %F{3}The shell has been reset%f.\n"
  builtin exec -l ${ZSH_ARGZERO#-}
fi
