#!/bin/zsh

#  2hex
#  /usr/local/zterm/zsh/functions (id: 40)
#
#  Generated by 'ztemplate_apply' (zterm/zsh/sources) on 2020-10-12
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# 2hex
# Print input as hex.
#
# Usage:
# 2hex [xdigit...]
#
# Example:
# `2hex 48656c6c6f'   ->   "Hello"
# `2hex 776f726c64'   ->   "world"
emulate -LR zsh



# Append piped input after arguments.
if [[ -p /dev/stdin ]]; then
  set -- ${argv} ${(@f)"$(<&0)"}
fi

# Remove all non-hex characters.
set -- ${argv//[^[:xdigit:]]/}

# If hex string length is odd, prepend 0.
if (( ${(c)#argv} % 2 == 1 )); then
  set -- '0'${argv}
fi



# Group bytes (every two
# adjacent characters).
printf '%s' "$argv"      |
/usr/bin/grep -e '..' -o |
pipeset -a hex

# Prepend \x to each group.
set -A hex '\x'${^hex}



# Print hex string.
printf '%b' "${(j::)hex}"

return 0
