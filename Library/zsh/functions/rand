#!/bin/zsh

#  rand
#  Z-Function (95)
#
#  Created by Maxim Puchkov on 2020-07-11.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# rand - generate a random variable
function rand() {
  # String
  function rand_str() {
    local n_bytes=${1:-1}
    local output_file=${2:-/dev/stdout}
    builtin print -- "Writing ${n_bytes} random bytes" \
      "to ${output_file}." >&2
    /bin/dd if=/dev/random of=$output_file \
      bs=8 count=$n_bytes 2>/dev/null
    return 0
  }
  
  # Integer
  function rand_int() {
    local -i rand
    let rand=$RANDOM%$upper_bound
    builtin print -- $rand
    return 0
  }
  
  if [[ $# -eq 0 ]]; then
    fn print-commands $0
    return 2
  fi
  
  typeset cmd=$1
  if [[ ${+functions[${0}_${cmd}]} -eq 0 ]]; then
      error -127 'Command not found: $cmd.'
  fi
  
  typeset -i size=${2:=0}
  if [[ $size -eq 0 ]]; then
    size=10
  fi
  shift 2
  
  
  ${0}_${cmd} "$@"
  return $?
}
