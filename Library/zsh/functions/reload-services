#!/bin/zsh

#  reload-services
#  Z-Function (4)
#
#  Created by Maxim Puchkov on 2020-04-27.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# <#Function description#>
function reload-services() {
    local launch_agents="${HOME}/Library/LaunchAgents"
    local services_group='com.maximpuchkov.services'
    local services=(
      $( find "${launch_agents}" -name "${services_group}.*" )
    )
    local n_services=${#services}
    
    if [[ $n_services -eq 0 ]]; then
        return 1
    fi
    
    printf 'Reloading %d service(s).\n' $n_services
    for s in $services; do
        launchctl unload "$s"
        launchctl load -w "$s"
    done
    return $?
}
