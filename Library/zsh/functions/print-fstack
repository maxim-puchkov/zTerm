#!/bin/zsh

#  print-fstack
#  Z-Function (60)
#
#  Created by Maxim Puchkov on 2020-06-08.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# Print functions in order of execution (excluding itself).
function print-fstack() {(
    typeset -a fstack=(${(aO)funcstack:1})
    typeset arrow='->'
    
    if [[ -t 1 ]]; then
        arrow="%F{7}${arrow}%f"
        set -A fstack '%F{2}'${^fstack}'%f'
    fi
    
    print -P -- "${(pj:$arrow:)fstack}"
    return 0
)}
