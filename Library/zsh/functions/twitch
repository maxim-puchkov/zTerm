#!/bin/zsh

#  twitch
#  Z-Function (110)
#
#  Created by Maxim Puchkov on 2020-09-06.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


if [[ $# -eq 0 ]]; then
  return 1
fi


# Command configuration file
typeset conf_file=~/private/etc/twitch.zsh.conf

# Create configuration file if it does not exist
if [[ ! -e $conf_file ]]; then
  touch -- $conf_file
fi

# If -e or --edit flag is set, edit the configuration file
if [[ $1 =~ (-e|--edit) ]]; then
  $=EDITOR -- $conf_file
  printf '%s: configuration file %s updated.' "$0" "$conf_file"
  return 0
fi

# Open Twitch URL
typeset base_url='https://twitch.com'
typeset channel_name=$1
shift
typeset url="${base_url}/${channel_name}"

open -a Safari -- $url

