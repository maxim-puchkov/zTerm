#!/bin/zsh

#  retc
#  Z-Function (62)
#
#  Created by Maxim Puchkov on 2020-06-09.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# Print return code of the last command.
function retc() {(
    let code=$?
    setopt noglob
    
    
    let color=$code==0?32:31
    let nocolor=39
    let reset=0
    
    function c() {
        printf '%b%s%b' $(esc $color) "$argv" $(esc $reset)
    }
    
    printf 'Return code: %b%d%b\n' \
        $(esc $color) $code $(esc $nocolor)
    return $code
)}
