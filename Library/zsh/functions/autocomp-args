#!/bin/zsh

#  autocomp-args
#  Z-Function (102)
#
#  Created by Maxim Puchkov on 2020-07-27.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# autocomp-args
function autocomp-args() {
  # Input file
  typeset file=$1
  # Output array
  typeset -a result=()
  
  # Read the file
  typeset line
  while read -r line; do
    if [[ $line =~ '^-' ]]; then
      typeset -a argument_names=(${(s:, :)line%%:*})
      typeset argument_description="${line#*: }"
      
      result+=("'(${(j: :)argument_names})'{${(j:,:)argument_names}}'[${argument_description}]' \\")
    fi
  done <$file
  set -A result ${result[1,-2]} ${result[-1]%" \\"}
  
  print -l -X2 -- $'\t'${^result}
  
  return 0
}
