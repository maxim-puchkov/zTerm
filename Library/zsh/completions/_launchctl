#compdef launchctl


_arguments -C \
  '1: :->command' \
  ': :_launch_agents' &&
    return 0
    

case $state in
  command)
    declare -a commands
    commands=(
      bootstrap:"bootstraps a domain or a service into a domain"
      bootout:"tears down a domain or removes a service from a domain"
      enable:"enables an existing service"
      disable:"disables an existing service"
      kickstart:"forces an existing service to start"
      attach:"attach the system's debugger to a service"
      debug:"configures the next invocation of a service for debugging"
      kill:"sends a signal to the service instance"
      blame:"prints the reason a service is running"
      print:"prints a description of a domain or service"
      print-cache:"prints information about the service cache"
      print-disabled:"prints which services are disabled"
      plist:"prints a property list embedded in a binary (targets the info.plist by default)"
      procinfo:"prints port information about a process"
      hostinfo:"prints port information about the host"
      resolveport:"resolves a port name from a process to an endpoint in launchd"
      limit:"reads or modifies launchd's resource limits"
      runstats:"prints performance statistics for a service"
      examine:"runs the specified analysis tool against launchd in a non-reentrant manner"
      config:"modifies persistent configuration parameters for launchd domains"
      dumpstate:"dumps launchd state to stdout"
      dumpjpcategory:"dumps the jetsam properties category for all services"
      reboot:"initiates a system reboot of the specified type"
      bootshell:"brings the system up from single-user mode with a console shell"
      load:"bootstraps a service or directory of services"
      unload:"unloads a service or directory of services"
      remove:"unloads the specified service name"
      list:"lists information about services"
      start:"starts the specified service"
      stop:"stops the specified service if it is running"
      setenv:"sets the specified environment variables for all services within the domain"
      unsetenv:"unsets the specified environment variables for all services within the domain"
      getenv:"gets the value of an environment variable from within launchd"
      bsexec:"execute a program in another process' bootstrap context"
      asuser:"execute a program in the bootstrap context of a given user"
      submit:"submit a basic job from the command line"
      managerpid:"prints the pid of the launchd controlling the session"
      manageruid:"prints the uid of the current launchd session"
      managername:"prints the name of the current launchd session"
      error:"prints a description of an error"
      variant:"prints the launchd variant"
      version:"prints the launchd version"
      help:"prints the usage for a given subcommand"
    )
    _describe -t commands command commands &&
      return 0
  ;;
esac
