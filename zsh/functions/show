#!/bin/zsh

#  show
#  Z-Function (77)
#
#  Created by Maxim Puchkov on 2020-06-30.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# Show and describe various kinds of objects
function show() {
    typeset -i -L3 last_status=$?
    typeset -ix c_true=2
    typeset -ix c_false=9


    # Prepend prefix offset and symbol
    typeset prefix
    if [[ -t 1 ]]; then
      zformat -f prefix \
          '%F{%0(p.$c_true.$c_false)}%B>%b%f ' \
          p:$last_status
    fi 
    
    while [[ -n $1 ]]; do
        case $1 in
          -v) print -P -- \
                "${prefix}%F{2}${2}%f=<${${(P)2}:-null}>"
              shift
          ;;
          *) print -P  -- "${prefix}${argv}"
          ;;
        esac
        shift
    done
    return 0
    
    
    
    if [[ $opts[-t] -eq 1 ]]; then
        print -P  -- "${prefix}${argv}"
        return 0
    fi
    
    if [[ -v $1 ]]; then
        print -P -- "${prefix}%F{2}${1}%f=<${${(P)1}:-null}>"
        return 0
    fi
}




