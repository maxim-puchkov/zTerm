#!/bin/zsh

#  clr
#  zTerm (id: 61)
#
#  Generated by 'zfn' on 2020-10-24
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# NAME:
# clr
#
# DESCRIPTION:
# Clear terminal buffer.
#
# USAGE:
# clr [ -[rs] ]
emulate -LR zsh
autoload -U error


# Function options.
# @define option
local -A opts
local -a specs
specs=('r' 's')
if ! zparseopts -D -E -F -K -M -A opts - ${specs[@]} \
     2> >(error -I -f3-); then
  return 1
fi


# Escape sequences.
local -a esc_seq=('\e[H' '\e[2J')


# @option -s
# @description Clear scrollback buffer.
if [[ ${+opts[-s]} -eq 1 ]]; then
  esc_seq+=('\e[3J')
fi


# Print escape sequences.
printf "%b" "${esc_seq[@]}"


# @option -r
# @description Reset shell.
if [[ ${+opts[-r]} -eq 1 ]]; then
  print -P -- "[%*] %F{3}The shell has been reset%f.\n"
  builtin exec -l ${ZSH_ARGZERO#-}
fi
