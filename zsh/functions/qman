#!/bin/zsh

#  qman
#  Z-Function (1)
#
#  Created by Maxim Puchkov on 2020-06-01.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# <#Function description#>
function qman() {
    typeset name=$1
    
    function qman-description() {
        /usr/bin/tbl $(man -w zsh-lovers) |
            egrep --ignore-case \
                  --after-context 1 \
                  --regexp '.SH ["]?NAME["]?' |
            tail -n 1
        
#            awk -F '- ' '{ print $2; }'
    }
    
    
    for match in $(/usr/bin/man -w "$name*"); do
        typeset -a line
        line=(
        $(/usr/bin/tbl $match |
            egrep --ignore-case \
                  --after-context 1 \
                  --regexp '.SH ["]?NAME["]?' |
            tail -n 1)
        )
        echo $line
    done
    
    
    
    description=$(qman-description)
    
    print -P -- "%F{4}$name%f - $description"
}
