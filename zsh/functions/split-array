#!/bin/zsh

#  split-array
#  Z-Function (84)
#
#  Created by Maxim Puchkov on 2020-07-05.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# Split array in two arrays 'left_split' and
# 'right_split' at next occurrence of 'str':
#   array(1..n)  ~>  left_split(1..i), right_split(i+1,n)
typeset -A opts
if ! zparseopts -D -E -A opts s: l+: r+:; then
  return 2
fi

typeset split_str=${opts[-s]}
typeset left_split_id=${${opts[-l]}:-'left_split'}
typeset right_split_id=${${opts[-r]}:-'right_split'}

typeset -i split_index=$(argn $split_str ${argv})
if [[ $split_index -eq 0 ]]; then
  return 1
fi

set -A $left_split_id   ${argv[1,$split_index]}
set -A $right_split_id  ${argv[$split_index+1,-1]}
return 0
