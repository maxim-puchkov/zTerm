#!/bin/zsh

#  boolopt
#  Z-Function (76)
#
#  Created by Maxim Puchkov on 2020-06-28.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# boolopt:
#   Test if a command option is enabled or disabled.
#   Disabled options begin with a '+' or '--no-'.
#
# Usage:
#   boolopt -o           ~>  returns 0
#   boolopt +o T F       ~>  prints "F", returns 1
#   boolopt --no-option  ~>  returns 1
function boolopt() {(
    autoload +Uz error
    if [[ $# -ne 1 ]] && [[ $# -ne 3 ]]; then
        error -2 -u "'$0 [-+]opt' or '$0 [-+]opt True False'."
        return 2
    fi
    
    typeset -i opt_value=$([[ ! $1 =~ '^([+]|--no-)' ]])$?
    if [[ -n $2 ]] && [[ -n $3 ]]; then
        case $opt_value in
            0) printf '%s' "$2" ;;
            1) printf '%s' "$3" ;;
        esac
    fi
    
    return $opt_value
)}
