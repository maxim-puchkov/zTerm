#!/bin/zsh

#  set-system-appearance
#  Z-Function (106)
#
#  Created by Maxim Puchkov on 2020-07-28.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# set-system-appearance -
function set-system-appearance() {
  autoload -Uz error
  
  # Check arguments
  if [[ $# -lt 1 ]]; then
    error -1 'New system appearance is not specified.'
    return 1
  fi
  
  # Set available appearances (light, dark)
  typeset -A appearances
  appearances=('light' 'off'  'dark' 'on')
  
  # Enable/disable dark mode
  typeset new_value=$1
  typeset mode=${appearances[$1]}
  typeset current_mode=${appearances[$(get-system-appearance)]}
  if [[ "$mode" == "$current_mode" ]]; then
    return 1
  fi
  
  /usr/local/bin/dark-mode $mode
  
  return 0
}
