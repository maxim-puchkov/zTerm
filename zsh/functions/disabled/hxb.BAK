#!/bin/bash


file=${1:?}
hexstring=$( hx $file )
total_length=${#hexstring}
byte_length=2
total_bytes=$(( $total_length / $byte_length ))
group_size=2
group_bytes=$(( 128 / $byte_length / $group_size ))
block_groups=$(( $group_bytes / $group_size ))
step=$(( $group_size * $byte_length ))

for block_pos in $(seq 0 $group_bytes $total_bytes); do
  echo bp=$block_pos
  for pos in $(seq $block_pos $step $block_end ); do
    echo p=$pos
    group=${hexstring:$pos:$step}
    printf '%s ' $group
  done
  echo
done
