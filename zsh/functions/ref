#!/bin/zsh

#  ref
#  Quick shell reload
#
#  Created by mpuchkov on 2020-04-21.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# Reload autoloaded functions
function ref() {
    if [[ ! -f $SHELLSTARTUP ]]; then
        touch $SHELLSTARTUP
    fi
    
    updated_files=($( find "$zfunc" -type f -mnewer $SHELLSTARTUP ))
    if [[ ${#updated_files} -eq 0 ]]; then
        return 1
    fi
    
#    printf 'Functions updated:\n'
    for fn in ${updated_files:t}; do {
        builtin unfunction $fn
        builtin autoload $fn
#        printf "$(green $fn_name)"
    }
    done 2> /dev/null
    
    touch $SHELLSTARTUP
    return 0
}


