#!/bin/zsh

#  errif
#  devx
#
#  Created by admin on 2020-03-02.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.


# Conditional error.
function errif() {
    # Evaluate condition.
    function evaluate_expr() {
        builtin eval $1
        return $?
    }
    
    # Arguments.
    local _expr="[[ ${1:-''} ]]"
    local _desc="${2:-Condition is true:\n  ${_expr}}"
    
    # If [[ EXPRESSION is true ]], then ERROR.
    if evaluate_expr $_expr; then
        \error $_desc
    fi
    return 0
}
