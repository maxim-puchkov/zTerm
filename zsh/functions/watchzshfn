#!/bin/zsh

#  watchzshfn
#  Generated by mkzsh at 12:46am.
#
#  Created by mpuchkov/506:20 on April 12, 2021.
#  ~Projects/zTerm2/zsh/functions/watchzshfn



# watchzshfn <function>
#
# Invoke zsh function when files in the
# current directory change.


unfunction $0
autoload $0

fn_name=$1


[[ $+functions[$fn_name] -eq 1 ]] || return 2

#print -u2 -P "%B%F{4}$PWD%f%b"
print -u2 -P "%F{4}${(@)$(functions $fn_name)}%f"

watchexec "/bin/zsh -c '$(functions $fn_name); $fn_name'"

