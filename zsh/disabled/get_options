#!/bin/zsh

#  get_options
#  devx
#
#  Created by admin on 2020-03-06.
#  Copyright Â© 2020 Maxim Puchkov. All rights reserved.
 

# Read all command options and store in an array with
# the specified identifier.
#   get_options identifier options...
function get_options() {
    # Check command syntax.
    SYNTAX=(get_options identifier options...)
    if [[ $# -eq 0 ]]; then
        serror 'identifier' "$SYNTAX"
        return 1
    fi
    
    # Check that identifier refers to an
    # existing array.
    local ARRAY_ID=${1:-opts}
    if [[ ! -v $ARRAY_ID ]]; then
        error "Variable not set: $(Bad $ARRAY_ID)."
        return 1
    fi
    shift
    
    set -A $ARRAY_ID $( read_options "$@" )
    export ARRAY_ID
}



#MARK: - Examples
# Example:
#   typeset -A command_options
#   command_input=(--ox 0 --oy 100 --3d --color=red)
#   get_options command_options $command_input
#   shift $command_options[shift_distance]

# Result:
#   Arr[ox]=0, Arr[oy]=100, Arr[3d]=set, Arr[color]=red.
