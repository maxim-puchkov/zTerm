#!/bin/zsh

# Decrypt AES-256-CBC


WD="$HOME/Developer/var"
m_file=$WD/decoded-message.txt
c_file=$WD/ciphertext.enc

# Get Key and IV
KEY=$( hx $WD/rsa.key.dec )
IV=0

# OpenSSL decrypt
openssl enc \
    -aes-256-cbc \
    -K "$KEY" \
    -iv $IV \
    -nosalt \
    -d \
    -in $c_file \
    -out $m_file


# Subprocess output
hx $m_file
return 0
